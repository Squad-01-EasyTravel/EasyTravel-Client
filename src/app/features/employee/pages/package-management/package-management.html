<div class="hero-section position-relative mb-4">
  <div class="hero-bg"></div>
  <div class="hero-overlay"></div>
  <div class="container-fluid position-relative">
    <div class="row align-items-center py-3">
      <div class="col-lg-8">
        <div class="hero-content text-white">
              <!-- Badge animado -->
              <span
                class="hero-badge bg-white bg-opacity-25 text-white px-3 py-2 rounded-pill mb-3 d-inline-flex align-items-center">
                <i class="fas fa-suitcase-rolling me-2 text-warning"></i>
                <span class="fw-semibold">Gerenciamento de Pacotes</span>
              </span>

              <!-- T√≠tulo com gradiente -->
              <h1 class="hero-title display-3 fw-bold mb-3">
                Pacotes de <span class="text-gradient">Viagem</span>
              </h1>

              <!-- Subt√≠tulo -->
              <p class="hero-description lead mb-4 opacity-75">
                Crie, edite e gerencie experi√™ncias √∫nicas para seus clientes com nossa plataforma intuitiva e moderna
              </p>

              <!-- Estat√≠sticas melhoradas com cores -->
              <div class="row g-3 text-center hero-stats">
                <div class="col-3">
                  <div class="stats-card stats-total bg-primary bg-opacity-90 text-white rounded-4 p-3 backdrop-blur">
                    <h3 class="stats-number h2 fw-bold mb-1">{{ filteredPackages.length }}</h3>
                    <small class="stats-label fw-semibold">{{ searchTerm ? 'Pacotes Encontrados' : 'Total de Pacotes' }}</small>
                  </div>
                </div>
                <div class="col-3">
                  <div class="stats-card stats-available bg-success bg-opacity-90 text-white rounded-4 p-3 backdrop-blur">
                    <h3 class="stats-number h2 fw-bold mb-1">{{ getAvailablePackagesCount() }}</h3>
                    <small class="stats-label fw-semibold">Dispon√≠veis</small>
                  </div>
                </div>
                <div class="col-3">
                  <div class="stats-card stats-inactive bg-warning bg-opacity-90 text-dark rounded-4 p-3 backdrop-blur">
                    <h3 class="stats-number h2 fw-bold mb-1">{{ getUnavailablePackagesCount() }}</h3>
                    <small class="stats-label fw-semibold">Inativos</small>
                  </div>
                </div>
                <div class="col-3">
                  <!-- <div class="stats-card stats-revenue bg-info bg-opacity-90 text-white rounded-4 p-3 backdrop-blur">
                    <h3 class="stats-number h2 fw-bold mb-1">R$ 125K</h3>
                    <small class="stats-label fw-semibold">Receita Estimada</small>
                  </div> -->
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4 d-none d-lg-flex justify-content-center align-items-center">
            <div class="hero-visual">
              <!-- √çcone removido para consist√™ncia com o dashboard -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Search and Filter Section Modernizada -->
    <div class="container mb-4">
      <div class="search-section-modern">
        <div class="card border-0 shadow-lg search-card">
          <div class="card-body p-0">
            <!-- Header da se√ß√£o de busca -->
            <div class="search-header p-4">
              <div class="row align-items-center">
                <div class="col">
                  <div class="search-title-container">
                    <div class="search-icon-wrapper me-3">
                      <i class="fas fa-search"></i>
                    </div>
                    <div>
                      <h5 class="search-title mb-1 fw-bold text-white">
                        Buscar Pacotes
                      </h5>
                      <p class="search-subtitle text-white mb-0 opacity-90">
                        Encontre rapidamente o ue voc√™ procura
                     </p>
                   </div>
                  </div>
               </div>
                <div class="col-auto">
                  <div class="search-actions">
                   <button class="btn btn-search-action" (click)="openFilterModal()" title="Filtros avan√ßados">
                      <i class="fas fa-sliders-h"></i>
                    </button>
                    <button class="btn btn-search-action" 
                            title="Limpar filtros"
                            (click)="clearAdvancedFilters()"
                            [disabled]="!hasActiveFilters()">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- √Årea de busca -->
            <div class="search-content p-4">
              <div class="search-input-container">
                <div class="search-input-wrapper">
                  <div class="search-input-icon">
                    <i class="fas fa-search"></i>
                  </div>
                  <input type="text"
                         class="search-input-field"
                         placeholder="Digite o nome do pacote..."
                         [(ngModel)]="searchTerm"
                         (ngModelChange)="onSearchChange($event)"
                         #searchInput>
                  <div class="search-input-actions">
                    <button type="button" 
                            class="btn-clear-search" 
                            title="Limpar busca"
                            (click)="clearSearch()"
                            [style.display]="searchTerm ? 'block' : 'none'">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                </div>

                <!-- Bot√£o de Incluir Pacote -->
                <div class="mt-3 d-flex justify-content-center">
                  <button type="button" 
                          class="btn-add-package btn btn-warning btn-lg px-4 py-2 rounded-pill fw-bold shadow"
                          (click)="openCreateModal()"
                          title="Criar novo pacote de viagem">
                    <i class="fas fa-plus me-2"></i>
                    <span>Incluir Novo Pacote</span>
                    <i class="fas fa-suitcase-rolling ms-2"></i>
                  </button>
                </div>

                <!-- Tags de filtros ativos -->
                <div class="active-filters-container" *ngIf="searchTerm || hasActiveFilters()">
                  <!-- Tag de busca -->
                  <div class="active-filter-tag" *ngIf="searchTerm">
                    <i class="fas fa-search me-1"></i>
                    <span class="filter-text">Busca: "{{ searchTerm }}"</span>
                    <button type="button" class="btn-remove-filter" (click)="clearSearch()" title="Remover filtro">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  
                  <!-- Tags de filtros avan√ßados -->
                  <div class="active-filter-tag" *ngFor="let tag of getActiveFilterTags()">
                    <i class="fas fa-filter me-1"></i>
                    <span class="filter-text">{{ tag }}</span>
                    <button type="button" class="btn-remove-filter" (click)="clearAdvancedFilters()" title="Remover filtro">
                      <i class="fas fa-times"></i>
                    </button>
                  </div>
                  
                  <!-- Informa√ß√µes dos resultados -->
                  <div class="filter-results-info">
                    <small class="text-muted">
                      <i class="fas fa-info-circle me-1"></i>
                      {{ filteredPackages.length }} de {{ packages.length }} pacotes encontrados
                    </small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



    <!-- Grid de Pacotes -->
    <div class="container packages-section" *ngIf="getPaginatedPackages().length > 0">
      <div class="packages-grid row g-4">
        <div class="col-xl-4 col-lg-6" *ngFor="let package of getPaginatedPackages()">
          <div class="package-card card h-100 border-0 shadow-sm">
            <!-- Imagem do Card com overlay melhorado -->
            <div class="card-image-container position-relative overflow-hidden">
              <img [src]="package.imageUrl" 
                   [alt]="package.bundleTitle"
                   class="card-img-top w-100 h-100 object-fit-cover"
                   (error)="onImageError($event, package)"
                   loading="lazy">

              <!-- Gradient overlay -->
              <div class="image-overlay position-absolute top-0 start-0 w-100 h-100"></div>

              <!-- Badges flutuantes -->
              <div
                class="card-badges position-absolute top-0 start-0 w-100 p-3 d-flex justify-content-between align-items-start">
                <!-- Rank Badge -->
                <span class="rank-badge badge rounded-pill px-3 py-2 fw-bold"
                  [class]="'rank-' + package.bundleRank.toLowerCase()">
                  <i class="fas fa-star me-1"></i>
                  {{package.bundleRank}}
                </span>

                <!-- Status Badge -->
                <span class="status-badge badge rounded-pill px-3 py-2 fw-bold" [class.bg-success]="package.available"
                  [class.bg-danger]="!package.available">
                  <i class="fas fa-circle pulse-dot me-1"></i>
                  {{ package.available ? 'Dispon√≠vel' : 'Indispon√≠vel' }}
                </span>
              </div>

              <!-- Price Tag -->
              <div class="price-tag position-absolute bottom-0 end-0 m-3">
                <div class="bg-white rounded-3 px-3 py-2 shadow-sm">
                  <small class="text-muted d-block">a partir de</small>
                  <strong class="text-primary h5 mb-0">R$ {{ package.initialPrice | number:'1.0-0' }}</strong>
                </div>
              </div>
            </div>

            <!-- Conte√∫do do Card melhorado -->
            <div class="card-body d-flex flex-column p-4">
              <!-- Header com t√≠tulo -->
              <div class="package-header mb-3">
                <h5 class="package-title card-title fw-bold mb-2 text-truncate-2">
                  {{ package.bundleTitle }}
                </h5>
                <div class="package-meta d-flex align-items-center text-muted small">
                  <i class="fas fa-calendar-alt me-1"></i>
                  <span>Criado em {{ package.createdAt | date:'dd/MM/yyyy' }}</span>
                </div>
              </div>

              <!-- Descri√ß√£o -->
              <p class="package-description card-text text-muted mb-3 text-truncate-2">
                {{ package.bundleDescription }}
              </p>

              <!-- Detalhes em pills -->
              <div class="package-details mb-3">
                <div class="row g-2">
                  <div class="col-6">
                    <div class="detail-pill bg-light rounded-pill p-2 text-center">
                      <i class="fas fa-calendar-alt text-primary d-block mb-1"></i>
                      <small class="fw-semibold d-block">{{ package.initialDate | date:'dd/MM' }} - {{ package.finalDate
                        | date:'dd/MM' }}</small>
                      <small class="text-muted" style="font-size: 0.7rem;">Per√≠odo</small>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="detail-pill bg-light rounded-pill p-2 text-center position-relative">
                      <i class="fas fa-ticket-alt text-warning d-block mb-2"></i>
                      
                      <!-- Container dos controles de quantidade -->
                      <div class="quantity-controls d-flex align-items-center justify-content-center mb-1">
                        <button class="btn-quantity btn-quantity-minus" 
                                (click)="changeQuantity(package, -1)"
                                [disabled]="package.quantity <= 0"
                                [class.disabled]="package.quantity <= 0"
                                title="Diminuir vagas">
                          <i class="fas fa-minus"></i>
                        </button>
                        
                        <div class="quantity-display">
                          <span class="quantity-number fw-bold">{{ package.quantity }}</span>
                          <small class="quantity-label d-block">vagas</small>
                        </div>
                        
                        <button class="btn-quantity btn-quantity-plus" 
                                (click)="changeQuantity(package, 1)"
                                title="Aumentar vagas">
                          <i class="fas fa-plus"></i>
                        </button>
                      </div>
                      
                      <small class="text-muted" style="font-size: 0.65rem;">Dispon√≠vel</small>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Bot√µes de a√ß√£o premium redesignados -->
              <div class="card-actions mt-auto">
                <div class="action-buttons-grid">
                  <!-- Bot√£o Editar -->
                  <button class="btn-action btn-edit" (click)="openEditModal(package)"
                    title="Editar informa√ß√µes do pacote">
                    <div class="btn-icon">
                      <i class="fas fa-edit"></i>
                    </div>
                    <div class="btn-content">
                      <span class="btn-label">Editar</span>
                      <small class="btn-desc">Modificar dados</small>
                    </div>
                  </button>

                  <!-- Bot√£o Ativar/Desativar -->
                  <button class="btn-action" [class.btn-activate]="!package.available"
                    [class.btn-deactivate]="package.available" (click)="toggleAvailability(package)"
                    [title]="package.available ? 'Desativar pacote' : 'Ativar pacote'">
                    <div class="btn-icon">
                      <i class="fas" [class.fa-play-circle]="!package.available"
                        [class.fa-pause-circle]="package.available"></i>
                    </div>
                    <div class="btn-content">
                      <span class="btn-label">{{ package.available ? 'Pausar' : 'Ativar' }}</span>
                      <small class="btn-desc">{{ package.available ? 'Tornar inativo' : 'Tornar ativo' }}</small>
                    </div>
                  </button>

                  <!-- Bot√£o Visualizar -->
                  <button class="btn-action btn-view" (click)="openViewModal(package)" title="Visualizar detalhes completos">
                    <div class="btn-icon">
                      <i class="fas fa-eye"></i>
                    </div>
                    <div class="btn-content">
                      <span class="btn-label">Ver</span>
                      <small class="btn-desc">Detalhes</small>
                    </div>
                  </button>

                  <!-- Bot√£o Excluir -->
                  <button class="btn-action btn-delete" (click)="deletePackage(package.id)"
                    title="Excluir pacote permanentemente">
                    <div class="btn-icon">
                      <i class="fas fa-trash-alt"></i>
                    </div>
                    <div class="btn-content">
                      <span class="btn-label">Excluir</span>
                      <small class="btn-desc">Remover</small>
                    </div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> <!-- Pagina√ß√£o Premium com Bootstrap -->
    <div class="container mt-5" *ngIf="filteredPackages.length > 0">
      <div class="pagination-section">
        <div class="card border-0 shadow-lg">
          <div class="card-body p-4">
            <div class="row align-items-center">
              <!-- Informa√ß√µes da p√°gina -->
              <div class="col-md-4">
                <div class="pagination-info">
                  <h6 class="mb-1 fw-bold text-primary">Resultados</h6>
                  <p class="text-muted mb-0">
                    Mostrando <strong class="text-primary">{{getDisplayStart()}}-{{getDisplayEnd()}}</strong>
                    de <strong class="text-primary">{{filteredPackages.length}}</strong> 
                    {{ searchTerm ? 'pacotes encontrados' : 'pacotes' }}
                    {{ searchTerm && filteredPackages.length !== packages.length ? '(de ' + packages.length + ' total)' : '' }}
                  </p>
                </div>
              </div>

              <!-- Controles de pagina√ß√£o -->
              <div class="col-md-4 text-center" *ngIf="getTotalPages() > 1">
                <nav aria-label="Navega√ß√£o de p√°ginas">
                  <ul class="pagination pagination-lg justify-content-center mb-0 custom-pagination">
                    <li class="page-item" [class.disabled]="currentPage === 1">
                      <button class="page-link" (click)="changePage(currentPage - 1)" [disabled]="currentPage === 1">
                        <i class="fas fa-chevron-left"></i>
                      </button>
                    </li>

                    <li class="page-item" *ngFor="let page of getVisiblePages()" [class.active]="page === currentPage"
                      [class.disabled]="page === '...'">
                      <button class="page-link" (click)="changePage(page)" [disabled]="page === '...'">
                        {{page}}
                      </button>
                    </li>

                    <li class="page-item" [class.disabled]="currentPage === getTotalPages()">
                      <button class="page-link" (click)="changePage(currentPage + 1)"
                        [disabled]="currentPage === getTotalPages()">
                        <i class="fas fa-chevron-right"></i>
                      </button>
                    </li>
                  </ul>
                </nav>
              </div>

              <!-- Seletor de itens por p√°gina -->
              <div class="col-md-4 text-end">
                <div class="page-size-controls d-flex align-items-center justify-content-end">
                  <label class="text-muted me-3 mb-0 fw-semibold">
                    <i class="fas fa-list me-1"></i>
                    Itens por p√°gina:
                  </label>
                  <select [(ngModel)]="pageSize" (change)="onPageSizeChange()"
                    class="form-select form-select-lg custom-select" style="width: auto;">
                    <option value="6">6</option>
                    <option value="12">12</option>
                    <option value="18">18</option>
                    <option value="24">24</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State Premium -->
    <div class="container empty-state-section" *ngIf="filteredPackages.length === 0 && packages.length === 0">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="empty-state-card text-center p-5">
            <!-- Illustration -->
            <div class="empty-illustration mb-4">
              <div class="illustration-container">
                <div class="main-illustration">
                  <i class="fas fa-suitcase-rolling"></i>
                </div>
              </div>
            </div>

            <!-- Content -->
            <div class="empty-content">
              <h2 class="empty-title fw-bold mb-3">Nenhum pacote encontrado</h2>
              <p class="empty-description text-muted mb-4 lead">
                Comece criando seu primeiro pacote de viagem e ofere√ßa experi√™ncias
                incr√≠veis aos seus clientes. Nossa plataforma facilita todo o processo!
              </p>

              <!-- Features -->
              <div class="empty-features row g-3 mb-5">
                <div class="col-md-4">
                  <div class="feature-card p-3 rounded-4">
                    <div class="feature-icon mb-2">
                      <i class="fas fa-star text-warning"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Gerencie facilmente</h6>
                    <small class="text-muted">Interface intuitiva e moderna</small>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="feature-card p-3 rounded-4">
                    <div class="feature-icon mb-2">
                      <i class="fas fa-map-marker-alt text-primary"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Organize destinos</h6>
                    <small class="text-muted">Estruture rotas e experi√™ncias</small>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="feature-card p-3 rounded-4">
                    <div class="feature-icon mb-2">
                      <i class="fas fa-users text-success"></i>
                    </div>
                    <h6 class="fw-bold mb-1">Atenda clientes</h6>
                    <small class="text-muted">Proporcione experi√™ncias √∫nicas</small>
                  </div>
                </div>
              </div>

              <!-- CTA Button -->
              <button class="btn-create-first btn btn-primary btn-lg px-5 py-3 rounded-4 fw-bold"
                (click)="openCreateModal()">
                <i class="fas fa-plus me-2"></i>
                Criar Primeiro Pacote
                <i class="fas fa-arrow-right ms-2"></i>
              </button>

              <!-- Help Text -->
              <p class="text-muted mt-3 small">
                <i class="fas fa-lightbulb me-1"></i>
                Dica: Use as estat√≠sticas acima para acompanhar o crescimento do seu neg√≥cio
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty Search Results -->
    <div class="container empty-state-section" *ngIf="filteredPackages.length === 0 && packages.length > 0">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="empty-state-card text-center p-5">
            <!-- Illustration -->
            <div class="empty-illustration mb-4">
              <div class="illustration-container">
                <div class="main-illustration">
                  <i class="fas fa-search"></i>
                </div>
              </div>
            </div>

            <!-- Content -->
            <div class="empty-content">
              <h2 class="empty-title fw-bold mb-3">Nenhum pacote encontrado</h2>
              <p class="empty-description text-muted mb-4 lead">
                N√£o encontramos pacotes com o t√≠tulo "<strong>{{ searchTerm }}</strong>".
                Tente ajustar o nome do pacote ou limpar a busca.
              </p>

              <!-- Search Tips -->
              <div class="search-tips mb-4">
                <h6 class="fw-bold mb-3">Dicas de busca por t√≠tulo:</h6>
                <div class="row g-3">
                  <div class="col-md-4">
                    <div class="tip-card p-3 rounded-3 bg-light">
                      <i class="fas fa-tag text-primary mb-2"></i>
                      <small class="d-block"><strong>Nome completo</strong><br>Ex: "Pacote Nordeste Completo"</small>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="tip-card p-3 rounded-3 bg-light">
                      <i class="fas fa-search text-success mb-2"></i>
                      <small class="d-block"><strong>Palavras-chave</strong><br>Ex: "F√©rias", "Aventura"</small>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="tip-card p-3 rounded-3 bg-light">
                      <i class="fas fa-spell-check text-warning mb-2"></i>
                      <small class="d-block"><strong>Parte do nome</strong><br>Ex: "Nordeste", "Sul"</small>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Action Buttons -->
              <div class="d-flex gap-3 justify-content-center">
                <button class="btn btn-outline-primary px-4 py-2" (click)="clearSearch()">
                  <i class="fas fa-times me-2"></i>
                  Limpar Busca
                </button>
                <button class="btn btn-primary px-4 py-2" (click)="openCreateModal()">
                  <i class="fas fa-plus me-2"></i>
                  Criar Novo Pacote
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


  <!-- Modal Premium Modernizado com Scroll Otimizado -->
  <div class="modal fade modern-modal" [class.show]="isModalOpen" [style.display]="isModalOpen ? 'block' : 'none'"
    tabindex="-1" *ngIf="isModalOpen" (click)="closeModal()">
    <div class="modal-dialog modal-xl modal-dialog-centered" (click)="$event.stopPropagation()">
      <div class="modal-content modern-modal-content d-flex flex-column" style="max-height: 90vh;">

        <!-- Header Premium do Modal - Fixo -->
        <div class="modal-header-premium flex-shrink-0">
          <div class="modal-header-bg"></div>
          <div class="modal-header-content">
            <div class="row align-items-center w-100">
              <div class="col">
                <div class="modal-title-section">
                  <div class="modal-icon-container">
                    <div class="modal-icon-wrapper">
                      <i class="fas fa-suitcase-rolling"></i>
                    </div>
                  </div>
                  <div class="modal-title-content">
                    <h3 class="modal-title-main">
                      {{ isEditMode ? 'Editar Pacote' : 'Criar Novo Pacote' }}
                    </h3>
                    <p class="modal-title-subtitle">
                      {{ isEditMode ? 'Atualize as informa√ß√µes do seu pacote de viagem' : 'Crie uma nova experi√™ncia
                      incr√≠vel para seus clientes' }}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <button type="button" class="btn-close-premium" (click)="closeModal()">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Corpo do Modal - Rol√°vel -->
        <div class="modal-body-premium flex-grow-1 overflow-auto" style="max-height: calc(90vh - 200px);">
          <form (ngSubmit)="savePackage()" class="modern-form">

            <!-- Se√ß√£o: Informa√ß√µes B√°sicas -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-info-circle"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Informa√ß√µes B√°sicas</h5>
                  <p class="section-subtitle">Defina os dados principais do seu pacote</p>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="bundleTitle" class="form-label-modern">
                    <i class="fas fa-tag label-icon"></i>
                    T√≠tulo do Pacote
                    <span class="required-indicator">*</span>
                  </label>
                  <input type="text" id="bundleTitle" class="form-control-modern" [(ngModel)]="newPackage.bundleTitle"
                    name="bundleTitle" placeholder="Ex: Pacote F√©rias Nordeste - 7 Dias" required>
                </div>

                <div class="form-group full-width">
                  <label for="bundleDescription" class="form-label-modern">
                    <i class="fas fa-align-left label-icon"></i>
                    Descri√ß√£o Completa
                    <span class="required-indicator">*</span>
                  </label>
                  <textarea id="bundleDescription" class="form-control-modern textarea-modern" rows="4"
                    [(ngModel)]="newPackage.bundleDescription" name="bundleDescription"
                    placeholder="Descreva detalhadamente o que o pacote inclui: destinos, atra√ß√µes, hospedagem, alimenta√ß√£o..."
                    required></textarea>
                </div>

                <div class="form-group">
                  <label for="initialPrice" class="form-label-modern">
                    <i class="fas fa-dollar-sign label-icon"></i>
                    Pre√ßo Inicial
                    <span class="required-indicator">*</span>
                  </label>
                  <div class="input-group-modern">
                    <span class="input-group-text-modern">R$</span>
                    <input type="number" id="initialPrice" class="form-control-modern"
                      [(ngModel)]="newPackage.initialPrice" name="initialPrice" min="0" step="0.01"
                      placeholder="1200.00" required>
                  </div>
                </div>

                <div class="form-group">
                  <label for="bundleRank" class="form-label-modern">
                    <i class="fas fa-star label-icon"></i>
                    Categoria do Pacote
                    <span class="required-indicator">*</span>
                  </label>
                  <select id="bundleRank" class="form-control-modern select-modern" [(ngModel)]="newPackage.bundleRank"
                    name="bundleRank" required>
                    <option value="">Selecione a categoria</option>
                    <option value="BRONZE">ü•â Bronze - B√°sico</option>
                    <option value="PRATA">ü•à Prata - Intermedi√°rio</option>
                    <option value="OURO">ü•á Ouro - Premium</option>
                    <option value="PLATINA">üíé Platina - Luxo</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Localiza√ß√µes -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Origem e Destino</h5>
                  <p class="section-subtitle">Configure os locais de partida e chegada</p>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group">
                  <label for="origin" class="form-label-modern">
                    <i class="fas fa-plane-departure label-icon"></i>
                    Local de Partida
                    <span class="required-indicator">*</span>
                  </label>
                  <select id="origin" class="form-control-modern select-modern" [(ngModel)]="selectedOriginId"
                    name="origin" required>
                    <option value="">Selecione a origem</option>
                    <option 
                      *ngFor="let location of locations" 
                      [value]="location.id">
                      {{formatLocationForTemplate(location)}}
                    </option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="destination" class="form-label-modern">
                    <i class="fas fa-plane-arrival label-icon"></i>
                    Local de Destino
                    <span class="required-indicator">*</span>
                  </label>
                  <select id="destination" class="form-control-modern select-modern" [(ngModel)]="selectedDestinationId"
                    name="destination" required>
                    <option value="">Selecione o destino</option>
                    <option 
                      *ngFor="let location of locations" 
                      [value]="location.id">
                      {{formatLocationForTemplate(location)}}
                    </option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Per√≠odo e Capacidade -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Per√≠odo e Capacidade</h5>
                  <p class="section-subtitle">Configure datas e n√∫mero de participantes</p>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group">
                  <label for="initialDate" class="form-label-modern">
                    <i class="fas fa-play label-icon"></i>
                    Data de In√≠cio
                    <span class="required-indicator">*</span>
                  </label>
                  <input type="datetime-local" id="initialDate" class="form-control-modern"
                    [(ngModel)]="newPackage.initialDate" name="initialDate" required>
                </div>

                <div class="form-group">
                  <label for="finalDate" class="form-label-modern">
                    <i class="fas fa-stop label-icon"></i>
                    Data de T√©rmino
                    <span class="required-indicator">*</span>
                  </label>
                  <input type="datetime-local" id="finalDate" class="form-control-modern"
                    [(ngModel)]="newPackage.finalDate" name="finalDate" required>
                </div>

                <div class="form-group">
                  <label for="quantity" class="form-label-modern">
                    <i class="fas fa-ticket-alt label-icon"></i>
                    Vagas Dispon√≠veis
                    <span class="required-indicator">*</span>
                  </label>
                  <input type="number" id="quantity" class="form-control-modern" [(ngModel)]="newPackage.quantity"
                    name="quantity" min="0" placeholder="10" required>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: M√≠dia e Configura√ß√µes -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-photo-video"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">M√≠dia e Configura√ß√µes</h5>
                  <p class="section-subtitle">Adicione imagens e v√≠deos para atrair mais clientes</p>
                </div>
              </div>

              <div class="form-grid">
                <!-- Upload de Imagem -->
                <div class="form-group full-width">
                  <label class="form-label-modern">
                    <i class="fas fa-upload label-icon"></i>
                    Upload de Imagem Principal
                    <span class="required-indicator">*</span>
                  </label>
                  <div class="image-upload-container">
                    <!-- Preview da imagem atual -->
                    <div class="image-preview-wrapper" *ngIf="newPackage.imageUrl || selectedImagePreview">
                      <div class="image-preview">
                        <img [src]="selectedImagePreview || newPackage.imageUrl"
                             alt="Preview da imagem"
                             class="preview-img">
                        
                        <!-- Loading overlay durante upload -->
                        <div class="preview-loading-overlay" *ngIf="uploadingImage">
                          <div class="preview-spinner">
                            <div class="spinner-border text-white" role="status">
                              <span class="visually-hidden">Enviando...</span>
                            </div>
                          </div>
                          <p class="preview-loading-text">Processando...</p>
                        </div>

                        <!-- Actions overlay -->
                        <div class="image-overlay-actions" *ngIf="!uploadingImage">
                          <button type="button" class="btn-remove-image"
                                  (click)="removeImage()"
                                  title="Remover imagem">
                            <i class="fas fa-trash-alt"></i>
                          </button>
                          <button type="button" class="btn-change-image"
                                  (click)="imageFileInput.click()"
                                  title="Alterar imagem">
                            <i class="fas fa-edit"></i>
                          </button>
                        </div>
                      </div>
                    </div>

                    <!-- √Årea de upload -->
                    <div class="upload-area"
                         *ngIf="!newPackage.imageUrl && !selectedImagePreview"
                         [class.drag-over]="isDragOver"
                         [class.uploading]="uploadingImage"
                         (click)="!uploadingImage && imageFileInput.click()"
                         (dragover)="onDragOver($event)"
                         (dragleave)="onDragLeave($event)"
                         (drop)="onDrop($event)">
                      
                      <!-- Estado normal -->
                      <div class="upload-content" *ngIf="!uploadingImage">
                        <div class="upload-icon">
                          <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h6 class="upload-title">Arraste uma imagem aqui</h6>
                        <p class="upload-subtitle">ou clique para selecionar</p>
                        <div class="upload-formats">
                          <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            Formatos aceitos: JPG, PNG, WebP, GIF (m√°x. 10MB)
                          </small>
                        </div>
                      </div>

                      <!-- Estado de upload -->
                      <div class="upload-loading" *ngIf="uploadingImage">
                        <div class="upload-spinner">
                          <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Enviando...</span>
                          </div>
                        </div>
                        <h6 class="upload-loading-title">
                          <i class="fas fa-cloud-upload-alt me-2"></i>
                          Fazendo Upload...
                        </h6>
                        <p class="upload-loading-subtitle">
                          Processando com <strong>Cloudinary</strong> ‚Üí <strong>ImgBB</strong> ‚Üí <strong>Base64</strong>
                        </p>
                        <div class="upload-progress-bar">
                          <div class="progress-bar-animated"></div>
                        </div>
                        <small class="upload-status-text text-muted mt-2">
                          <i class="fas fa-shield-alt me-1"></i>
                          Sistema inteligente com m√∫ltiplos provedores
                        </small>
                      </div>
                    </div>

                    <!-- Input de arquivo oculto -->
                    <input type="file"
                           #imageFileInput
                           accept="image/*"
                           (change)="onImageSelected($event)"
                           style="display: none;">
                  </div>
                </div>

                <!-- URL da Imagem (alternativa) -->
                <div class="form-group">
                  <label for="imageUrl" class="form-label-modern">
                    <i class="fas fa-link label-icon"></i>
                    OU URL da Imagem
                  </label>
                  <div class="input-with-validation">
                    <input type="url" id="imageUrl" class="form-control-modern"
                           [(ngModel)]="newPackage.imageUrl"
                           name="imageUrl"
                           [class.is-invalid]="newPackage.imageUrl && !isValidImageUrl(newPackage.imageUrl)"
                           [class.is-valid]="newPackage.imageUrl && isValidImageUrl(newPackage.imageUrl)"
                           [disabled]="uploadingImage"
                           placeholder="https://exemplo.com/imagem.jpg"
                           (ngModelChange)="onImageUrlChange($event)">
                    
                    <!-- Indicador de URL v√°lida -->
                    <div class="input-feedback" *ngIf="newPackage.imageUrl">
                      <i class="fas fa-check-circle text-success" 
                         *ngIf="isValidImageUrl(newPackage.imageUrl)"
                         title="URL v√°lida"></i>
                      <i class="fas fa-exclamation-triangle text-warning" 
                         *ngIf="!isValidImageUrl(newPackage.imageUrl)"
                         title="URL pode n√£o ser v√°lida"></i>
                    </div>
                  </div>
                  
                  <small class="form-text text-muted">
                    <i class="fas fa-lightbulb me-1"></i>
                    Cole uma URL de imagem de provedores confi√°veis (Cloudinary, ImgBB, etc.)
                  </small>
                </div>

                <!-- Status do Pacote -->
                <div class="form-group full-width">
                  <label class="form-label-modern">
                    <i class="fas fa-toggle-on label-icon"></i>
                    Status do Pacote
                    <small class="text-muted ms-2">(Altera√ß√£o imediata)</small>
                  </label>
                  <div class="toggle-container">
                    <label class="toggle-switch">
                      <input type="checkbox" [(ngModel)]="newPackage.available" name="available" (change)="onStatusToggleChange()">
                      <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">
                      <i class="fas me-2" [class.fa-play-circle]="!newPackage.available" [class.fa-pause-circle]="newPackage.available" 
                         [class.text-success]="newPackage.available" [class.text-danger]="!newPackage.available"></i>
                      {{ newPackage.available ? 'Ativo - Vis√≠vel para clientes' : 'Inativo - Oculto para clientes' }}
                    </span>
                    <small class="text-muted d-block mt-1">
                      <strong>{{ newPackage.available ? 'Pausar' : 'Ativar' }}</strong> - {{ newPackage.available ? 'Tornar inativo' : 'Tornar ativo' }}
                    </small>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Footer Premium do Modal - Fixo na parte inferior -->
        <div class="modal-footer-premium flex-shrink-0" style="background: white; border-top: 1px solid #dee2e6; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);">
          <div class="footer-actions d-flex justify-content-between align-items-center w-100 p-3">
            <!-- Informa√ß√µes do formul√°rio √† esquerda -->
            <div class="form-status-info">
              <small class="text-muted">
                <i class="fas fa-info-circle me-1"></i>
                {{ isEditMode ? 'Editando pacote existente' : 'Criando novo pacote' }}
              </small>
            </div>

            <!-- Bot√µes de a√ß√£o √† direita -->
            <div class="action-buttons d-flex gap-2">
              <button type="button" class="btn btn-secondary-modern px-4 py-2" (click)="closeModal()">
                <i class="fas fa-times me-2"></i>
                Cancelar
              </button>

              <!-- Bot√£o para modo de edi√ß√£o -->
              <button type="button" class="btn btn-warning-modern px-4 py-2"
                      *ngIf="isEditMode"
                      (click)="savePackage()"
                      [disabled]="!isFormValid()"
                      title="Salvar todas as altera√ß√µes feitas no pacote">
                <i class="fas fa-save me-2"></i>
                <span class="d-none d-sm-inline">Salvar Altera√ß√µes</span>
                <span class="d-sm-none">Salvar</span>
              </button>

              <!-- Bot√£o para cria√ß√£o -->
              <button type="button" class="btn btn-primary-modern px-4 py-2"
                      *ngIf="!isEditMode"
                      (click)="savePackage()"
                      [disabled]="!isFormValid()">
                <i class="fas fa-plus me-2"></i>
                <span class="d-none d-sm-inline">Criar Pacote</span>
                <span class="d-sm-none">Criar</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop do Modal -->
  <div class="modal-backdrop fade" [class.show]="isModalOpen" *ngIf="isModalOpen"></div>

  <!-- Modal de Visualiza√ß√£o (Somente Leitura) -->
  <div class="modal fade modern-modal" [class.show]="isViewModalOpen" [style.display]="isViewModalOpen ? 'block' : 'none'"
    tabindex="-1" *ngIf="isViewModalOpen" (click)="closeViewModal()">
    <div class="modal-dialog modal-xl modal-dialog-centered" (click)="$event.stopPropagation()">
      <div class="modal-content modern-modal-content d-flex flex-column" style="max-height: 90vh;">

        <!-- Header do Modal de Visualiza√ß√£o -->
        <div class="modal-header-premium flex-shrink-0">
          <div class="modal-header-bg"></div>
          <div class="modal-header-content">
            <div class="row align-items-center w-100">
              <div class="col">
                <div class="modal-title-section">
                  <div class="modal-icon-container">
                    <div class="modal-icon-wrapper" style="background: linear-gradient(135deg, #28a745, #20c997);">
                      <i class="fas fa-eye"></i>
                    </div>
                  </div>
                  <div class="modal-title-content">
                    <h3 class="modal-title-main">
                      Visualizar Pacote
                    </h3>
                    <p class="modal-title-subtitle">
                      Veja todas as informa√ß√µes detalhadas do pacote selecionado
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <button type="button" class="btn-close-premium" (click)="closeViewModal()">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Corpo do Modal de Visualiza√ß√£o - Rol√°vel -->
        <div class="modal-body-premium flex-grow-1 overflow-auto" style="max-height: calc(90vh - 200px);">
          <div class="view-form">

            <!-- Se√ß√£o: Informa√ß√µes B√°sicas (Visualiza√ß√£o) -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-info-circle"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Informa√ß√µes B√°sicas</h5>
                  <p class="section-subtitle">Dados principais do pacote</p>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group full-width">
                  <label class="form-label-modern">
                    <i class="fas fa-tag label-icon"></i>
                    T√≠tulo do Pacote
                  </label>
                  <div class="view-field">
                    <span class="view-content">{{ viewPackage?.bundleTitle }}</span>
                  </div>
                </div>

                <div class="form-group full-width">
                  <label class="form-label-modern">
                    <i class="fas fa-align-left label-icon"></i>
                    Descri√ß√£o Completa
                  </label>
                  <div class="view-field view-field-large">
                    <span class="view-content">{{ viewPackage?.bundleDescription }}</span>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-dollar-sign label-icon"></i>
                    Pre√ßo Inicial
                  </label>
                  <div class="view-field">
                    <span class="view-content view-price">R$ {{ viewPackage?.initialPrice | number:'1.2-2' }}</span>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-star label-icon"></i>
                    Categoria do Pacote
                  </label>
                  <div class="view-field">
                    <span class="view-content view-rank" [class]="'rank-' + viewPackage?.bundleRank?.toLowerCase()">
                      <i class="fas fa-star me-1"></i>
                      {{ getRankDisplay(viewPackage?.bundleRank) }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Per√≠odo e Capacidade (Visualiza√ß√£o) -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Per√≠odo e Capacidade</h5>
                  <p class="section-subtitle">Datas e n√∫mero de participantes</p>
                </div>
              </div>

              <div class="form-grid">
                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-play label-icon"></i>
                    Data de In√≠cio
                  </label>
                  <div class="view-field">
                    <span class="view-content">{{ viewPackage?.initialDate | date:'dd/MM/yyyy HH:mm' }}</span>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-stop label-icon"></i>
                    Data de T√©rmino
                  </label>
                  <div class="view-field">
                    <span class="view-content">{{ viewPackage?.finalDate | date:'dd/MM/yyyy HH:mm' }}</span>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-ticket-alt label-icon"></i>
                    Vagas Dispon√≠veis
                  </label>
                  <div class="view-field">
                    <span class="view-content">{{ viewPackage?.quantity }} vagas</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Localiza√ß√£o da Viagem (Visualiza√ß√£o) -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-map-marked-alt"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">Localiza√ß√£o da Viagem</h5>
                  <p class="section-subtitle">Origem e destino do pacote</p>
                </div>
              </div>

              <div class="form-grid">
                <!-- Origem -->
                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-plane-departure label-icon"></i>
                    Origem
                  </label>
                  <div class="view-field">
                    <span class="view-content">
                      <i class="fas fa-plane-departure text-success me-2"></i>
                      {{ viewPackage?.origin }}
                    </span>
                  </div>
                </div>

                <!-- Destino -->
                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-map-marker-alt label-icon"></i>
                    Destino
                  </label>
                  <div class="view-field">
                    <span class="view-content">
                      <i class="fas fa-map-marker-alt text-primary me-2"></i>
                      {{ viewPackage?.destination }}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: M√≠dia e Configura√ß√µes (Visualiza√ß√£o) -->
            <div class="form-section">
              <div class="form-section-header">
                <div class="section-icon-wrapper">
                  <i class="fas fa-photo-video"></i>
                </div>
                <div class="section-title-content">
                  <h5 class="section-title">M√≠dia e Configura√ß√µes</h5>
                  <p class="section-subtitle">Imagens, v√≠deos e configura√ß√µes</p>
                </div>
              </div>

              <div class="form-grid">
                <!-- Imagem do Pacote -->
                <div class="form-group full-width" *ngIf="viewPackage?.imageUrl">
                  <label class="form-label-modern">
                    <i class="fas fa-image label-icon"></i>
                    Imagem Principal
                  </label>
                  <div class="view-image-container">
                    <img [src]="viewPackage!.imageUrl" 
                         [alt]="viewPackage!.bundleTitle" 
                         class="view-image"
                         (error)="onImageError($event, viewPackage!)"
                         loading="lazy">
                  </div>
                </div>

                <!-- Status do Pacote -->
                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-toggle-on label-icon"></i>
                    Status do Pacote
                  </label>
                  <div class="view-field">
                    <span class="view-status" [class.status-active]="viewPackage?.available" [class.status-inactive]="!viewPackage?.available">
                      <i class="fas fa-circle me-1"></i>
                      {{ viewPackage?.available ? 'Ativo - Vis√≠vel para clientes' : 'Inativo - Oculto para clientes' }}
                    </span>
                  </div>
                </div>

                <!-- Data de Cria√ß√£o -->
                <div class="form-group">
                  <label class="form-label-modern">
                    <i class="fas fa-calendar-plus label-icon"></i>
                    Data de Cria√ß√£o
                  </label>
                  <div class="view-field">
                    <span class="view-content">{{ viewPackage?.createdAt | date:'dd/MM/yyyy HH:mm' }}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer do Modal de Visualiza√ß√£o -->
        <div class="modal-footer-premium flex-shrink-0" style="background: white; border-top: 1px solid #dee2e6; box-shadow: 0 -2px 10px rgba(0,0,0,0.1);">
          <div class="footer-actions d-flex justify-content-between align-items-center w-100 p-3">
            <!-- Informa√ß√µes do pacote -->
            <div class="form-status-info">
              <small class="text-muted">
                <i class="fas fa-eye me-1"></i>
                Visualizando: {{ viewPackage?.bundleTitle }}
              </small>
            </div>

            <!-- Bot√µes de a√ß√£o -->
            <div class="action-buttons d-flex gap-2">
              <button type="button" class="btn btn-secondary-modern px-4 py-2" (click)="closeViewModal()">
                <i class="fas fa-times me-2"></i>
                Fechar
              </button>

              <button type="button" class="btn btn-primary-modern px-4 py-2" (click)="editFromView()">
                <i class="fas fa-edit me-2"></i>
                <span class="d-none d-sm-inline">Editar Pacote</span>
                <span class="d-sm-none">Editar</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop do Modal de Visualiza√ß√£o -->
  <div class="modal-backdrop fade" [class.show]="isViewModalOpen" *ngIf="isViewModalOpen"></div>

  <!-- Modal de Filtros -->
  <div class="modal fade filter-modal" [class.show]="isFilterModalOpen" [style.display]="isFilterModalOpen ? 'block' : 'none'"
    tabindex="-1" *ngIf="isFilterModalOpen" (click)="closeFilterModal()">
    <div class="modal-dialog modal-lg modal-dialog-centered" (click)="$event.stopPropagation()">
      <div class="modal-content filter-modal-content">

        <!-- Header do Modal de Filtros -->
        <div class="filter-modal-header">
          <div class="filter-header-bg"></div>
          <div class="filter-header-content">
            <div class="row align-items-center w-100">
              <div class="col">
                <div class="filter-title-section">
                  <div class="filter-icon-container">
                    <div class="filter-icon-wrapper">
                      <i class="fas fa-sliders-h"></i>
                    </div>
                  </div>
                  <div class="filter-title-content">
                    <h4 class="filter-title-main">
                      Filtros Avan√ßados
                    </h4>
                    <p class="filter-title-subtitle">
                      Refine sua busca para encontrar exatamente o que procura
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-auto">
                <button type="button" class="btn-close-filter" (click)="closeFilterModal()">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Corpo do Modal de Filtros -->
        <div class="filter-modal-body">
          <form class="filter-form">

            <!-- Se√ß√£o: Categoria e Pre√ßo -->
            <div class="filter-section">
              <div class="filter-section-header">
                <h6 class="filter-section-title">
                  <i class="fas fa-star me-2"></i>
                  Categoria e Pre√ßo
                </h6>
              </div>

              <div class="filter-grid">
                <!-- Categoria -->
                <div class="filter-group">
                  <label class="filter-label">Categoria do Pacote</label>
                  <div class="filter-options">
                    <div class="filter-checkbox-group">
                      <label class="filter-checkbox" *ngFor="let category of categories">
                        <input type="checkbox" 
                               [value]="category.value"
                               [checked]="advancedFilters.categoria.includes(category.value)"
                               (change)="onCategoryChange(category.value, $event)">
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-label">{{ category.label }}</span>
                      </label>
                    </div>
                  </div>
                </div>

                <!-- Faixa de Pre√ßo -->
                <div class="filter-group">
                  <label class="filter-label">Faixa de Pre√ßo</label>
                  <div class="price-range-container">
                    <div class="price-inputs">
                      <div class="price-input-group">
                        <span class="price-prefix">R$</span>
                        <input type="number" 
                               class="price-input" 
                               placeholder="Min" 
                               min="0"
                               [(ngModel)]="advancedFilters.precoMinimo">
                      </div>
                      <span class="price-separator">at√©</span>
                      <div class="price-input-group">
                        <span class="price-prefix">R$</span>
                        <input type="number" 
                               class="price-input" 
                               placeholder="Max" 
                               min="0"
                               [(ngModel)]="advancedFilters.precoMaximo">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Localiza√ß√£o -->
            <div class="filter-section">
              <div class="filter-section-header">
                <h6 class="filter-section-title">
                  <i class="fas fa-map-marker-alt me-2"></i>
                  Localiza√ß√£o
                </h6>
              </div>

              <div class="filter-grid">
                <!-- Destino -->
                <div class="filter-group">
                  <label class="filter-label">Destino</label>
                  <div class="filter-select-container">
                    <select class="filter-select" [(ngModel)]="advancedFilters.destino">
                      <option value="">Todos os destinos</option>
                      <option *ngFor="let location of locations" [value]="location.city">
                        {{ location.city }} - {{ location.states }}
                      </option>
                    </select>
                  </div>
                </div>

                <!-- Origem -->
                <div class="filter-group">
                  <label class="filter-label">Origem</label>
                  <div class="filter-select-container">
                    <select class="filter-select" [(ngModel)]="advancedFilters.origem">
                      <option value="">Todas as origens</option>
                      <option *ngFor="let location of locations" [value]="location.city">
                        {{ location.city }} - {{ location.states }}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>

            <!-- Se√ß√£o: Per√≠odo e Capacidade -->
            <div class="filter-section">
              <div class="filter-section-header">
                <h6 class="filter-section-title">
                  <i class="fas fa-calendar-alt me-2"></i>
                  Per√≠odo e Capacidade
                </h6>
              </div>

              <div class="filter-grid">
                <!-- Per√≠odo -->
                <div class="filter-group full-width">
                  <label class="filter-label">Per√≠odo da Viagem</label>
                  <div class="date-range-container">
                    <div class="date-input-group">
                      <input type="date" 
                             class="date-input"
                             [(ngModel)]="advancedFilters.dataIda">
                      <span class="date-label">Data in√≠cio</span>
                    </div>
                    <span class="date-separator">at√©</span>
                    <div class="date-input-group">
                      <input type="date" 
                             class="date-input"
                             [(ngModel)]="advancedFilters.dataVolta">
                      <span class="date-label">Data fim</span>
                    </div>
                  </div>
                </div>

                <!-- Status -->
                <div class="filter-group">
                  <label class="filter-label">Status</label>
                  <div class="filter-select-container">
                    <select class="filter-select" [(ngModel)]="advancedFilters.status">
                      <option value="all">Todos os status</option>
                      <option value="available">Dispon√≠vel</option>
                      <option value="unavailable">Indispon√≠vel</option>
                    </select>
                  </div>
                </div>

                <!-- N√∫mero de Viajantes -->
                <div class="filter-group">
                  <label class="filter-label">N√∫mero de Viajantes (m√≠n.)</label>
                  <div class="filter-input-container">
                    <input type="number" 
                           class="filter-input" 
                           min="1" 
                           max="20"
                           [(ngModel)]="advancedFilters.viajantes">
                  </div>
                </div>
              </div>
            </div>

          </form>
        </div>

        <!-- Footer do Modal de Filtros -->
        <div class="filter-modal-footer">
          <div class="filter-footer-actions">
            <div class="filter-results-info">
              <small class="text-muted">
                <i class="fas fa-info-circle me-1"></i>
                <span class="results-count">{{ filteredPackages.length }}</span> pacotes encontrados
              </small>
            </div>

            <div class="filter-action-buttons">
              <button type="button" class="btn btn-outline-secondary" (click)="closeFilterModal()">
                <i class="fas fa-times me-2"></i>
                Cancelar
              </button>

              <button type="button" class="btn btn-outline-primary" (click)="clearAdvancedFilters()">
                <i class="fas fa-undo me-2"></i>
                Limpar Filtros
              </button>

              <button type="button" class="btn btn-primary" (click)="applyAdvancedFilterModal()">
                <i class="fas fa-search me-2"></i>
                Aplicar Filtros
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- Backdrop do Modal de Filtros -->
  <div class="modal-backdrop fade" [class.show]="isFilterModalOpen" *ngIf="isFilterModalOpen"></div>

  <!-- Modais de Confirma√ß√£o e Toast -->
  <app-delete-confirmation-modal></app-delete-confirmation-modal>
  <app-toast-container></app-toast-container>
